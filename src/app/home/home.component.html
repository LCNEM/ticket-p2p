<mat-toolbar color="primary">
    <mat-form-field fxFill color="accent" *ngIf="searching; else notSearching">
        <input matInput placeholder="モザイク名" [(ngModel)]="mosaicName" (blur)="searching = false" (submit)="designate()">
    </mat-form-field>

    <ng-template #notSearching>
        <button mat-button (click)="sidenav.toggle()">
            <mat-icon *ngIf="!sidenav.opened">menu</mat-icon>
            <mat-icon *ngIf="sidenav.opened">arrow_back</mat-icon>
        </button>

        <span>LCNEM Wallet</span>
        <span class="fill-remaining-space"></span>
        <button mat-button matTooltip="更新" (click)="refresh()">
            <mat-icon>refresh</mat-icon>
        </button>
        <button mat-button matTooltip="検索" (click)="searching = true">
            <mat-icon>search</mat-icon>
        </button>
    </ng-template>
</mat-toolbar>
<mat-sidenav-container>
    <mat-sidenav #sidenav>
        <div fxLayout="column">
            <button mat-button fxFlex="100" routerLink="/transfer">
                <mat-icon>send</mat-icon>送信
            </button>
            <button mat-button fxFlex="100" routerLink="/history">
                <mat-icon>history</mat-icon>履歴
            </button>
            <button mat-button fxFlex="100" routerLink="/scan">
                <mat-icon>center_focus_strong</mat-icon>QRコードをスキャン
            </button>
            <button mat-button fxFlex="100" (click)="logout()">
                <mat-icon>lock</mat-icon>ログアウト
            </button>
        </div>
    </mat-sidenav>
    <mat-sidenav-content>
        <div class="out-toolbar">
            <div class="progress">
                <mat-spinner *ngIf="loading; else loaded"></mat-spinner>
            </div>
            <ng-template #loaded>
                <div fxLayout="row wrap">
                    <div fxFlex="25" fxFlex.sm="33.3" fxFlex.xs="50" *ngFor="let mosaic of ownedMosaics">
                        <mat-grid-list cols="1" rowHeight="16:9">
                            <mat-grid-tile>
                                <mat-card mat-ripple [routerLink]="['/mosaic', mosaic.namespace, mosaic.name]" [matTooltip]="mosaic.translation['ja'].name">
                                    <div class="mosaic-image">
                                        <img [src]="mosaic.imageUrl" />
                                    </div>
                                </mat-card>
                            </mat-grid-tile>
                        </mat-grid-list>
                    </div>
                </div>

            </ng-template>
        </div>
    </mat-sidenav-content>
</mat-sidenav-container>