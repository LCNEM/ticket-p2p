<mat-sidenav-container>
    <mat-sidenav #sidenav class="mat-elevation-z16">
        <mat-toolbar class="background-contain" [ngStyle]="{'background-image': 'url(favicon.svg)'}">
        </mat-toolbar>
        <div fxLayout="column">
            <mat-nav-list>
                <mat-divider></mat-divider>
                <mat-list-item (click)="logout()">
                    <mat-icon mat-list-icon>lock_open</mat-icon>
                    {{translation.logout[global.lang]}}
                </mat-list-item>
            </mat-nav-list>
        </div>
    </mat-sidenav>
    <mat-sidenav-content>
        <mat-toolbar color="primary" class="mat-elevation-z4">
            <button mat-icon-button (click)="sidenav.toggle()">
                <mat-icon>menu</mat-icon>
            </button>
            <button mat-icon-button class="background-contain" [ngStyle]="{'background-image': 'url(favicon.svg)'}"></button>
            <span>ちけっとピアツーピア</span>

            <span class="fill-remaining-space"></span>


            <button mat-icon-button (click)="refresh()" [disabled]="loading">
                <mat-icon>refresh</mat-icon>
            </button>

            <mat-menu #langMenu="matMenu" [overlapTrigger]="false">
                <button mat-menu-item (click)="global.lang = 'en'">
                    English
                </button>
                <button mat-menu-item (click)="global.lang = 'ja'">
                    日本語
                </button>
            </mat-menu>
            <button mat-icon-button [matMenuTriggerFor]="langMenu" yPosition="below">
                {{global.lang}}
            </button>
        </mat-toolbar>
        <div class="out-toolbar">
            <mat-spinner *ngIf="loading; else loaded"></mat-spinner>
            <ng-template #loaded>
                <mat-card *ngFor="let event of this.global.eventIds">
                    <mat-card-header>
                        <span>{{global.events[event].name}}</span>

                        <span class="fill-remaining-space"></span>
                        <span>
                            <button mat-icon-button (click)="deleteEvent(event)">
                                <mat-icon>delete</mat-icon>
                            </button>
                            <button mat-icon-button routerLink="/events/{{event}}">
                                <mat-icon>open_in_new</mat-icon>
                            </button>
                        </span>
                    </mat-card-header>
                    <mat-card-content></mat-card-content>
                </mat-card>
                <button mat-fab color="accent" class="add-button" (click)="createEvent()">
                    <mat-icon>add</mat-icon>
                </button>
            </ng-template>
        </div>
    </mat-sidenav-content>
</mat-sidenav-container>